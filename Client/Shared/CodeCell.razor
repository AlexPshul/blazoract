@using System.Net.Http

@inject HttpClient Http

<div class="cell">
    <div class="toolbar">
        <button @onclick="RunCell">
            &#x25BA;
        </button>
    </div>
    <input placeholder="Write some code here..." @bind="cell.Content" @bind:event="oninput" />
    <div class="break" />
    <div class="output">
        @result.Output
    </div>
</div>

@code {
    [Parameter]
    public Cell cell { get; set; }

    private ExecuteResult result = new ExecuteResult();

    private async Task RunCell()
    {
        var request = new ExecuteRequest(cell.Content);
        var response = await Http.PostAsJsonAsync("run", request);
        result = await response.Content.ReadFromJsonAsync<ExecuteResult>();
    }
}