@using System;
@using System.Collections.Generic;
@using System.Linq;

@inject ContentService content



<div class="cells">
    @if (cells != null)
    {
        <Virtualize Context="cell" Items="@cells">
            @if (cell.Type == CellType.Code)
            {
                <CodeCell Content="@cell.Content" />
            }
            else
            {
                <TextCell Content="@cell.Content" />
            }
            <NewCell Position="@cell.Position" />
        </Virtualize>
    }
</div>

@code {
    List<Cell> cells;
    protected override void OnInitialized()
    {
        cells = content.GetInitialContent();
        Console.WriteLine(cells);
        content.OnChange += StateHasChanged;
    }
}